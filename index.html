<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>進階音樂播放器</title>
<style>
    body {
        background-color: #121212;
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        text-align: center;
    }
    .player-container {
        padding: 20px;
    }
    audio {
        display: none;
    }
    .progress-container {
        width: 100%;
        max-width: 400px;
        margin: 15px auto;
        display: flex;
        align-items: center;
    }
    .progress {
        flex: 1;
        appearance: none;
        height: 5px;
        background: #444;
        border-radius: 5px;
        outline: none;
        margin: 0 10px;
    }
    .progress::-webkit-slider-thumb {
        appearance: none;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #1db954;
        cursor: pointer;
    }
    .time {
        font-size: 12px;
        min-width: 40px;
    }
    .controls {
        margin-top: 15px;
    }
    .controls button {
        background-color: #1db954;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 0 5px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 16px;
    }
    .controls button:hover {
        background-color: #17a44a;
    }
    .playlist-container {
        margin-top: 20px;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
        background-color: #222;
        border-radius: 10px;
        padding: 10px;
        display: block;
    }
    .playlist-item {
        padding: 8px;
        cursor: pointer;
        border-bottom: 1px solid #444;
    }
    .playlist-item:hover {
        background-color: #333;
    }
    .toggle-playlist-btn {
        margin-top: 10px;
        background-color: #555;
        border: none;
        color: white;
        padding: 8px 16px;
        cursor: pointer;
        border-radius: 15px;
    }
    .toggle-playlist-btn:hover {
        background-color: #777;
    }
</style>
</head>
<body>

<div class="player-container">
    <h1>音樂播放器</h1>
    <audio id="audio"></audio>

    <!-- 進度條與時間顯示 -->
    <div class="progress-container">
        <span id="currentTime" class="time">0:00</span>
        <input type="range" id="progress" class="progress" value="0" min="0" max="100">
        <span id="duration" class="time">0:00</span>
    </div>

    <div class="controls">
        <button id="prevBtn">上一首</button>
        <button id="playPauseBtn">播放</button>
        <button id="nextBtn">下一首</button>
    </div>

    <button class="toggle-playlist-btn" id="togglePlaylist">隱藏播放清單</button>
    <div class="playlist-container" id="playlistContainer">
        <!-- 播放清單項目 -->
    </div>
</div>

<script>
const audio = document.getElementById('audio');
const playPauseBtn = document.getElementById('playPauseBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const playlistContainer = document.getElementById('playlistContainer');
const togglePlaylistBtn = document.getElementById('togglePlaylist');
const progress = document.getElementById('progress');
const currentTimeEl = document.getElementById('currentTime');
const durationEl = document.getElementById('duration');

let currentTrack = 0;
const playlist = [
    { title: "歌曲 1", src: "song1.mp3" },
    { title: "歌曲 2", src: "song2.mp3" },
    { title: "歌曲 3", src: "song3.mp3" }
];

// 生成播放清單
playlist.forEach((track, index) => {
    const item = document.createElement('div');
    item.classList.add('playlist-item');
    item.textContent = track.title;
    item.addEventListener('click', () => {
        currentTrack = index;
        loadTrack(currentTrack);
        audio.play();
        playPauseBtn.textContent = "暫停";
    });
    playlistContainer.appendChild(item);
});

// 載入歌曲
function loadTrack(index) {
    audio.src = playlist[index].src;
}

// 更新時間顯示
function formatTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${minutes}:${secs < 10 ? "0" : ""}${secs}`;
}

audio.addEventListener('timeupdate', () => {
    progress.value = (audio.currentTime / audio.duration) * 100 || 0;
    currentTimeEl.textContent = formatTime(audio.currentTime);
    durationEl.textContent = formatTime(audio.duration || 0);
});

progress.addEventListener('input', () => {
    audio.currentTime = (progress.value / 100) * audio.duration;
});

// 上一首
prevBtn.addEventListener('click', () => {
    currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
    loadTrack(currentTrack);
    audio.play();
    playPauseBtn.textContent = "暫停";
});

// 下一首
nextBtn.addEventListener('click', () => {
    currentTrack = (currentTrack + 1) % playlist.length;
    loadTrack(currentTrack);
    audio.play();
    playPauseBtn.textContent = "暫停";
});

// 播放/暫停
playPauseBtn.addEventListener('click', () => {
    if (audio.paused) {
        audio.play();
        playPauseBtn.textContent = "暫停";
    } else {
        audio.pause();
        playPauseBtn.textContent = "播放";
    }
});

// 自動播放下一首
audio.addEventListener('ended', () => {
    currentTrack = (currentTrack + 1) % playlist.length;
    loadTrack(currentTrack);
    audio.play();
});

// 切換播放清單顯示/隱藏
togglePlaylistBtn.addEventListener('click', () => {
    if (playlistContainer.style.display === "none") {
        playlistContainer.style.display = "block";
        togglePlaylistBtn.textContent = "隱藏播放清單";
    } else {
        playlistContainer.style.display = "none";
        togglePlaylistBtn.textContent = "顯示播放清單";
    }
});

// 初始化
loadTrack(currentTrack);
</script>

</body>
</html>
